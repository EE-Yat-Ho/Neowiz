# 20210208
## 오늘 한 일
[ okr 나도 하냐..? ]
ORK = Objectives & Key Results
따로 정리~~~


[ CI ( Continuous Integration ) 공부 ]
자동 배포!!

종류
Xcode server : 애플에서 서비스하고, 인증서 관리도 편함. 웹으로 접근도 가능(오 유료 서버 불필요? 하긴 개발자 계정이 얼만데 ㅡㅡ) / Xcode랑 깃 연동 필요, 배포(Test Flight 등)는 자동화 안해줌.

JenKins
불편한 만큼 커스텀이 짱짱

Fastlane

3종류 모두 포스팅하기

스태틱 라이브러리와 프레임워크 정리하기

[ 커피 드리퍼 ]
경근님이 아침에 갈아끼우고 물통 청소하고 채우기까지 ㅠㅠ
담에 내가 해놓자..


[ 이제 모하지.. ]
수요일 2시 자율 퇴근 와아앙 + 재택 와아아아앙
옵씨로 광고SDK 좀허자


[ 연관 영상 레이아웃 ]
연관영상 레이아웃 작업 완료.
The Love..


[ 유튜브 커스텀 컨트롤 ] 
.. 탭바에도 이전과 같은 화면 회전 알고리즘 적용 성공
오 루트 컨트롤러에 적용 가능!!
그러면 똑같이 화면 회전 컨트롤 가능!!
ㅇㅋㅇㅋ 실마리를 찾음
코디네이터 객체 하나 써야하겠넹

^^ 개가튼 유튜브.. 로고랑 이거저거 난리났네 ;
var playVarDic = ["playsinline": 1, // 처음에 전체화면 안되게하기
                  "controls": 0, // 컨트롤 없애기
                  "iv_load_policy": 3, // 특수효과 제거 : 안먹힘
                  "modestbranding": 1, // 유튜브 로고 제거 : 안먹힘
                  "rel": 0, // 유튜브의 연관영상 제거 : 안먹힘
                  "showInfo": 0 // 유튜브의 영상 제목 및 업로더의 정보 표시 : 안먹힘...
                    ]
                    
그냥 AV 플레이어로 하기 -> 유튜브 영상에 직접 접근해야함.
-> 하지만 직접 접근하는 방식은 유튜브 정책(ToS: Terms of Service)에 위반됨..

해결법.
1. 그냥 나둔다... 하지만 업로더의 프로필사진이나 연관영상을 누르면 유튜브로 넘어가버림 ㅠ
2. 프로필, 나중에보기, 더보기, 연관영상을 내가 덮어버린다. -> 이건 정책에 괜찮은걸까..?
3. 영상을 우리 서버에 저장한다 ㅠ

일단 덮어버리고 얘기해보자 ^_^,,
ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ아아아앍 조져따리ㅠㅠㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ
유튜브 영상 커스텀 관련 이슈 문의드립니다.

[ 상황 설명 ]
유튜브의 컨트롤을 모두 제거하고 영상을 가져올 경우, 유튜브의 ToS에 위반되어,
( 2018년 9월 25일부터 ) 어쩔수 없이 띄워야하는 컨트롤들이 있는 상황입니다. 
1월 27일, 유튜브 ToS를 모르고 컨트롤을 모두 비노출 할 수 있다는 판단을 내려서 정말 죄송합니다..ㅠ

어쩔 수 없이 띄워야하는 컨트롤들은 아래와 같습니다.

1. 좌측 상단의 영상 게시자 프로필
2. 우측 상단의 Watch later, Share, Info 버튼들
3. 하단의 More vidoes ( 연관 영상 )


[ 발생한 문제들 ]
1. 프로필은 우리 서비스가 아닌 유튜브의 프로필이며,
2. 연관 영상 또한, 우리 서비스가 아닌 유튜브의 연관 영상이며,
3. 프로필, Info, More videos는 유튜브로 링크되버리는 문제가 있습니다.

이들을 UI작업으로 덮어서 가리는 시도를 하였지만, 
재생시간 프로그래스바와, More vidoes가 겹치는 등의 한계에 부딪혔습니다.


[ 해결 방안 ]
하지만, 영상을 유튜브의 서버에서 가져오는 것이 아닌, 
자체 서버에 저장하고 가져오는 방식이라면 유튜브의 정책을 따르지않을 수 있습니다.

이에 따른 방안은 2가지로 생각되며, 어떻게 해야할 지 문의드립니다!
1. 그냥 유튜브의 컨트롤들을 사용한다. ( 사용성이 떨어짐 )
2. 우리측의 서버에 영상을 저장한다. ( 서버 비용 증가 )

이상입니다. 감사합니다.
ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅠㅠㅠㅠㅠㅠㅠㅠㅠㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ

[ 서버 ]
일단 정리해보면,
로컬은 다 되는데, 서버에서만 오류가 발생함.
분석을 해보니 소스가 다르거나, 테이블이 다르거나 한게 아님;
로컬과 서버의 유일한 차이점은 DB이름의 차이고,
문제가 발생하는 소스는 네이티브 쿼리를 사용하는 곳임.
이에 추측하기를, 서버에서 네이티브 쿼리를 사용할 때 쿼리문에 디비이름이 이상하게 들어간게 아닌가..싶음!
그래서 쿼리 로그를 확인하고 싶은데,
그러려면 SUPER privilege가 필요하다고함.
RDS의 디비에서 해당 슈퍼 특권을 획득하기 위해서는 파라미터 그룹 수정이 필요하고,
이를 수정하였지만, 적용하기 위해서는 디비의 재부팅이 필요하다고함.
그런데 디비가 서버리스라서 그런건지 콘솔로도 CLI로도 재부팅이 안됨;

혹시 어캐하는지 알려주실 수 있나요..

디비 파라미터 그룹 수정하니까 수정중이뜨네?
수정 중 끝나고 결과보고 물어보자
안되네...... 근데 재부팅 보류중도 없는데? 흠? 먼데;

그래서 더 검색하던 와중에 이런게 나옴
https://gonigoni.kr/posts/logging-rds/
오잉 이걸 왜 진작 못찾았지, 파라미터 그룹에서 바로 로그를 생성하는 옵션이 있자너?
는 서버리스에는 없네..........

??????????
ㅋㅋㅋㅋ아니 CloudWatch에서 그냥 로그 볼 수 있네 ㅋㅋㅋㅋ엌ㅋㅋ큐ㅠㅠㅠ
ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ해결!!!!ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ
이런 뭔 미틴
String끼리 비교할 때 인코딩 방식이 달라서? 지원하지 않아서? 오류가 나는거였음..
비디오 테이블 컬럼들의 인코딩방식?을 바꿔줌
ALTER TABLE TABLE_NAME CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
그니까 바로됨..!! 흐어ㅓ
[ 삽질 정리 ] ( RDS에서 String비교시 주의 )
[  ]




## 일일보고
kkPoint
- 서버 버그 픽스 및 정리.
- 유튜브 커스텀 컨트롤 이슈 공론화.
- 연관영상 레이아웃 완료.

기타
- OKR 공부 및 정리

## 민재님 오시면 물어볼거..
[ 네트워크 매니저에 로우 데이터 핸들러 여쭤보기 ]
[ tig 커밋 아이디 보기 ]
