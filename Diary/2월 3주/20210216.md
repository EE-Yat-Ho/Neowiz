# 20210216
## 오늘 한 일
[ Att 팝업 ]
1. 애디스콥에서 뜨는 권한 허용창 찾아보기 By 민재님
아니 검색해도 제대로 안나오네.. 페북 광고 타게팅 이슈인건가 싶기도하고..
=> 물어보니까 Att팝업임!

기존에는 IDFA ( 광고 식별자 )를 디폴트로 사용 가능 했는데,
iOS 14부터는 ATT 프레임워크를 통한 팝업알림으로 허가를 받아야만 사용 가능.
거기다가 아이폰에 ATT 요청을 막아버리는 LAT ( Limit Ad Tracking ) 설정까지 추가됨.
이에 광고 업계는 발등에 불이 떨어진 상태..

애플이 2018년에 내놓은 SKAdNetwork, 구글 크롬의 개인정보 보호 샌드박스 등,
이에 대한 대책으로 말이 많음..


2. 경근님이 대응해준거 같은데 메인 서버 아직도 오류임..
메인서버 아직도 작업중 2개네 컹스..


3. 서버쪽에서 SNS 토큰 인증과정
[ application.properties => application.yml ]
[ pom.xml (maven) => build.gradle (gradle) ]
응 아니야
이거아니고
oauth2.0 프로토콜을 따르는 각자의 인증 방식이 있는거라 각자 인증해야함.
리다이렉트도 아니고
서버인증이랑 iOS단에서 인증받은거랑 섞어서 어캐 하는거도 아니고

그냥, iOS에서 받은 엑세스 토큰 스트링 + 어떤 SNS인지 쏴주고,
서버에서는 그걸로 프로필 받아오는 통신하고 잘 되면 Jwt 토큰 쏴주는 거였음~~~~~~~~~~~~~~~~~~~~~~~~~

https://developers.kakao.com/docs/latest/ko/kakaologin/rest-api#req-user-info
카카오는 쉘에 이거 치니까 됨
curl -v -X GET "https://kapi.kakao.com/v2/user/me" \
  -H "Authorization: Bearer LdLA0N7iGdWasFdX88RaHZCB261dw7UHZGbEpAopyWAAAAF3qh2ANg"
엑세스 토큰 부분이 accessTokenInfo로 받은게 아니라, oauthToken.accesToken이였음!

이제 구글, 애플도 똑같이 하고, 서버에서 지지고 볶으면 되겠네~~


[ 디자인 중간점검 회의 ]
영상 카드들 텍스트 1줄, 2줄에 따른 높이 변화 가능. (3줄부터는 ... 처리)
Alert(토스트)는 1~3줄까지 가능 + 아래에서 위로 올라오는 애니메이션 추가
토글버튼 애니메이션 불필요.
회원가입에서 닫기 누를시, 홈이 아닌 로그인화면으로!
구글 자동 로그인 ㄴㄴ ( 계정 선택 가능하게 하기 ) => 지금도 그렇게되어있음
최근 검색어 100개까지 저장하기.
출석 지난달 보기 ㄴㄴ


## 일일보고 
kkPoint
- SNS로그인 iOS -> 서버 2중 인증 Flow 정확한 이해 완료.
- 카카오 2중 인증 가능 확인 ( 애플, 구글 남음 )
- 디자인 중간점검 회의 참석 및 정리

iOS
- ATT 팝업 관련 정리 ( iOS14, LAT, IDFA 등 )


## 해야할 일 Queue
4. S3로 자동배포
5. 로그인 구현하고.. 계정 매니저 만들고.. 이거 기반으로 [상세뷰 구독여부, 구독채널, 포인트 내역, 숍 내역, 출석부, 내정보 수정하기]
6. 유튜브 API 사용여부 파악하고, 사용한다고하면 구현 ( vid -> 조회수, 날짜, 재생시간 등.. )

- 디자인팀과의 이슈
요청 드릴 필요한 뷰 : 쿠폰 상세, 채널 상세, 무료충전소, 내정보 상세화면 등..
연관상품 띄우는 알고리즘
연관영상 띄우는 알고리즘


## 민재님 오시면 물어볼거..
[ 네트워크 매니저에 로우 데이터 핸들러 여쭤보기 ]
[ tig 커밋 아이디 보기 ]
