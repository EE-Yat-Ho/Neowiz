# 20210208 삽질의 승리!!
일단 정리해보면,
로컬은 다 되는데, 서버에서만 오류가 발생함.
분석을 해보니 소스가 다르거나, 테이블이 다르거나 한게 아님;
로컬과 서버의 유일한 차이점은 DB이름의 차이고,
문제가 발생하는 소스는 네이티브 쿼리를 사용하는 곳임.
이에 추측하기를, 서버에서 네이티브 쿼리를 사용할 때 쿼리문에 디비이름이 이상하게 들어간게 아닌가..싶음!
그래서 쿼리 로그를 확인하고 싶은데,
그러려면 SUPER privilege가 필요하다고함.
RDS의 디비에서 해당 슈퍼 특권을 획득하기 위해서는 파라미터 그룹 수정이 필요하고,
이를 수정하였지만, 적용하기 위해서는 디비의 재부팅이 필요하다고함.
그런데 디비가 서버리스라서 그런건지 콘솔로도 CLI로도 재부팅이 안됨;

혹시 어캐하는지 알려주실 수 있나요..

디비 파라미터 그룹 수정하니까 수정중이뜨네?
수정 중 끝나고 결과보고 물어보자
안되네...... 근데 재부팅 보류중도 없는데? 흠? 먼데;
얘도 먼가 삐꾸가 안맞긴하지, 권한을 얻는 작업을 다 수행했는데 안된느거 보면..

그런데 더 검색하던 와중에 이런게 나옴
https://gonigoni.kr/posts/logging-rds/
오잉 이걸 왜 진작 못찾았지, 파라미터 그룹에서 바로 로그를 생성하는 옵션이 있자너?
는 서버리스에는 없네..........

망연자실.. 혹여나해서 클라우드 와치에 그냥 들어가봄 그런데..
??????????
ㅋㅋㅋㅋ아니 CloudWatch에서 그냥 로그 볼 수 있네 ㅋㅋㅋㅋ엌ㅋㅋ큐ㅠㅠㅠ
열심히 로그 분석시작
ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ해결!!!!ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ
이런 뭔 미틴
String끼리 비교할 때 인코딩 방식이 달라서? 지원하지 않아서? 오류가 나는거였음..
비디오 테이블 컬럼들의 인코딩방식?을 바꿔줌
ALTER TABLE TABLE_NAME CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
그니까 바로됨..!! 흐어ㅓ

